<!DOCTYPE html>
<html>
    <h4 class="text-center text-danger">✅ 我是 static/form_fresh.html - 測試版本 v2025-05-16</h4>

<head>
    <meta charset="UTF-8">
    <title>📋 健康紀錄表單 (LIFF)</title>
    <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">
<div class="container mt-5">
    <div class="card shadow">
        <div class="card-body">
            <h4 class="card-title text-center mb-4">📋 健康紀錄表單（fresh 測試版）</h4>
            <form method="post" action="#">
                <div class="mb-3">
                    <label class="form-label">暱稱（LINE 名稱）</label>
                    <input type="text" name="display_name" class="form-control" id="displayNameInput" readonly>
                </div>
                <div class="mb-3">
                    <label class="form-label">身高（cm）</label>
                    <input type="number" name="height" class="form-control" step="0.1">
                </div>
                <div class="mb-3">
                    <label class="form-label">體重（kg）</label>
                    <input type="number" name="weight" class="form-control" step="0.1">
                </div>
                <div class="mb-3">
                    <label class="form-label">體脂率（%）</label>
                    <input type="number" name="body_fat" class="form-control" step="0.1">
                </div>
                <div class="mb-3">
                    <label class="form-label">內臟脂肪等級</label>
                    <input type="number" name="visceral_fat" class="form-control" step="0.1">
                </div>
                <button type="submit" class="btn btn-success w-100">提交紀錄 ✅</button>
            </form>
        </div>
    </div>
</div>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        liff.init({ liffId: "LIFF_ID_PLACEHOLDER" })
            .then(() => {
                if (!liff.isLoggedIn()) {
                    liff.login();
                } else {
                    return liff.getProfile();
                }
            })
            .then(profile => {
                document.getElementById("displayNameInput").value = profile.displayName;
            })
            .catch(err => {
                console.error("LIFF init error", err);
                alert("⚠ 無法取得 LINE 資訊，請用 LINE 開啟此連結！");
            });
    });
</script>
</body>
</html>
